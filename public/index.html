<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road Trip Planner - Aix-en-Provence</title>

    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="shortcut icon" href="logo.png">

    <!-- Meta tags -->
    <meta name="description" content="AI-powered road trip planner from Aix-en-Provence. Discover amazing routes with intelligent recommendations.">
    <meta name="theme-color" content="#667eea">

    <!-- Premium Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/premium-design-system.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/navigation-buttons.css">
    <link rel="stylesheet" href="css/results-overlay.css">
    <link rel="stylesheet" href="css/landmarks-overlay.css">
    <link rel="stylesheet" href="css/sticky-form.css">
    <link rel="stylesheet" href="css/enhanced-route-results.css">
    <link rel="stylesheet" href="css/agent-results.css">
    <link rel="stylesheet" href="css/ztl-zones.css">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">

    <script>
        // Background video auto-play setup
        document.addEventListener('DOMContentLoaded', function() {
            const backgroundVideo = document.getElementById('heroBackgroundVideo');
            if (backgroundVideo) {
                // Ensure the video loops and plays
                backgroundVideo.loop = true;
                backgroundVideo.muted = true;
                backgroundVideo.play().catch(e => {
                    console.log('Background video autoplay blocked:', e);
                });
            }
        });
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Premium Landing Page -->
        <section class="landing-page">
            <!-- Navigation -->
            <nav class="landing-nav premium-nav">
                <div class="nav-container">
                    <div class="nav-brand">
                        <img src="logo.png" alt="Road Trip Planner" class="nav-logo">
                        <span class="nav-title">Road Trip Planner</span>
                    </div>
                    <div class="nav-links">
                        <a href="#features" class="nav-link">Features</a>
                        <a href="#planning" class="nav-link">Plan Trip</a>
                        <button class="nav-cta" onclick="scrollToPlanning()">Get Started</button>
                    </div>
                </div>
            </nav>

            <!-- Sticky Search Form -->
            <div id="stickySearchForm" class="sticky-search-form">
                <div class="sticky-form-container">
                    <div class="sticky-brand">
                        <img src="logo.png" alt="Road Trip Planner" class="sticky-logo">
                    </div>
                    <div class="sticky-form-content">
                        <input
                            type="text"
                            id="stickyDestination"
                            placeholder="Destination"
                            class="sticky-input"
                        >
                        <select id="stickyStops" class="sticky-select">
                            <option value="2">2 stops</option>
                            <option value="3" selected>3 stops</option>
                            <option value="4">4 stops</option>
                            <option value="5">5 stops</option>
                        </select>
                        <div class="sticky-budget-section">
                            <div class="sticky-section-label">Budget</div>
                            <div class="sticky-budget-scroller">
                                <div class="sticky-budget-track">
                                    <div class="sticky-budget-slider" id="stickyBudgetSlider"></div>
                                    <div class="sticky-budget-option" data-budget="budget" data-position="0">
                                        <img src="/images/budget/budget.png" alt="Budget">
                                    </div>
                                    <div class="sticky-budget-option" data-budget="moderate" data-position="1">
                                        <img src="/images/budget/moderate.png" alt="Moderate">
                                    </div>
                                    <div class="sticky-budget-option active" data-budget="comfort" data-position="2">
                                        <img src="/images/budget/comfortable.png" alt="Comfort">
                                    </div>
                                    <div class="sticky-budget-option" data-budget="luxury" data-position="3">
                                        <img src="/images/budget/luxury.png" alt="Luxury">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="sticky-divider"></div>
                        <div class="sticky-theme-section">
                            <div class="sticky-section-label">Style</div>
                            <div class="sticky-theme-options">
                                <button class="sticky-theme-btn active" data-agent="adventure" title="Adventure">
                                    <img src="/images/icons/adventure_icon.png" alt="Adventure">
                                </button>
                                <button class="sticky-theme-btn active" data-agent="culture" title="Culture">
                                    <img src="/images/icons/culture_icon.png" alt="Culture">
                                </button>
                                <button class="sticky-theme-btn active" data-agent="food" title="Food">
                                    <img src="/images/icons/food_icon.png" alt="Food">
                                </button>
                                <button class="sticky-theme-btn active" data-agent="hidden-gems" title="Hidden Gems">
                                    <img src="/images/icons/hidden_gem_icon.png" alt="Hidden Gems">
                                </button>
                            </div>
                        </div>
                        <button id="stickyGenerateRoute" class="sticky-generate-btn" title="Generate Route">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M9 20l-5.447-2.724A1 1 0 013 16.382V7.618a1 1 0 01.553-.894L9 4l6 3 5.447-2.724A1 1 0 0121 5.118v8.764a1 1 0 01-.553.894L15 17l-6-3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="m9 4 6 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Hero Section with Main Form -->
            <section class="hero">
                <!-- Video Background -->
                <div class="hero-video-background">
                    <video id="heroBackgroundVideo" autoplay muted loop playsinline poster="logo.png">
                        <source src="video 2.mp4" type="video/mp4">
                    </video>
                    <div class="hero-video-overlay"></div>
                </div>

                <div class="hero-container">
                    <div class="hero-content">
                        <div class="hero-text">
                            <div class="hero-brand">
                                <img src="logo.png" alt="Road Trip Planner" class="hero-logo">
                                <div class="hero-brand-text">RoadTrip</div>
                            </div>
                            <h1 class="hero-title">
                                <span class="hero-title-main">Discover Europe</span>
                                <span class="hero-title-sub">one perfect route at a time</span>
                            </h1>
                            <p class="hero-description">
                                AI-powered journey planning from Aix-en-Provence to your dream destinations.
                                Curated experiences, hidden gems, and seamless routes crafted just for you.
                            </p>

                            <!-- Main Search Form -->
                            <div class="hero-form-wrapper">
                                <div class="hero-form">
                                    <div class="form-row-main">
                                        <div class="form-field-destination">
                                            <input
                                                type="text"
                                                id="destination"
                                                placeholder="Where do you want to go? (e.g., Barcelona, Rome)"
                                                class="hero-input"
                                            >
                                        </div>
                                        <div class="form-field-stops">
                                            <select id="stops" class="hero-select">
                                                <option value="2">2 stops</option>
                                                <option value="3" selected>3 stops</option>
                                                <option value="4">4 stops</option>
                                                <option value="5">5 stops</option>
                                            </select>
                                        </div>
                                        <button id="generateRoute" class="hero-generate-btn" title="Generate Route AI">
                                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
                                                <path d="M9 20l-5.447-2.724A1 1 0 013 16.382V7.618a1 1 0 01.553-.894L9 4l6 3 5.447-2.724A1 1 0 0121 5.118v8.764a1 1 0 01-.553.894L15 17l-6-3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="m9 4 6 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="form-row-options">
                                        <div class="budget-section">
                                            <label class="section-label">Budget Level</label>
                                            <div class="budget-slider-container">
                                                <div class="budget-slider-track">
                                                    <div class="budget-slider-fill"></div>
                                                    <div class="budget-slider-handle" id="budgetHandle">
                                                        <div class="budget-slider-tooltip">
                                                            <span class="budget-tooltip-text">Comfort</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="budget-labels">
                                                    <div class="budget-label" data-budget="budget" data-position="0">
                                                        <span class="budget-name">Budget</span>
                                                        <span class="budget-price">€-€€</span>
                                                    </div>
                                                    <div class="budget-label" data-budget="moderate" data-position="1">
                                                        <span class="budget-name">Moderate</span>
                                                        <span class="budget-price">€€-€€€</span>
                                                    </div>
                                                    <div class="budget-label active" data-budget="comfort" data-position="2">
                                                        <span class="budget-name">Comfort</span>
                                                        <span class="budget-price">€€€-€€€€</span>
                                                    </div>
                                                    <div class="budget-label" data-budget="luxury" data-position="3">
                                                        <span class="budget-name">Luxury</span>
                                                        <span class="budget-price">€€€€€</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="theme-section">
                                            <label class="section-label">Travel Style</label>
                                            <div class="travel-style-grid">
                                                <div class="travel-style-card active" data-agent="adventure">
                                                    <div class="travel-style-image">
                                                        <img src="/images/travel_style/adventure.png" alt="Adventure">
                                                    </div>
                                                    <div class="travel-style-content">
                                                        <h3 class="travel-style-title">Adventure</h3>
                                                        <p class="travel-style-desc">Outdoor activities and thrilling experiences</p>
                                                    </div>
                                                    <div class="travel-style-checkmark">✓</div>
                                                </div>
                                                <div class="travel-style-card" data-agent="culture">
                                                    <div class="travel-style-image">
                                                        <img src="/images/travel_style/culture.png" alt="Culture">
                                                    </div>
                                                    <div class="travel-style-content">
                                                        <h3 class="travel-style-title">Culture</h3>
                                                        <p class="travel-style-desc">Museums, art, and historical landmarks</p>
                                                    </div>
                                                    <div class="travel-style-checkmark">✓</div>
                                                </div>
                                                <div class="travel-style-card" data-agent="food">
                                                    <div class="travel-style-image">
                                                        <img src="/images/travel_style/food.png" alt="Food">
                                                    </div>
                                                    <div class="travel-style-content">
                                                        <h3 class="travel-style-title">Food</h3>
                                                        <p class="travel-style-desc">Culinary delights and local cuisine</p>
                                                    </div>
                                                    <div class="travel-style-checkmark">✓</div>
                                                </div>
                                                <div class="travel-style-card" data-agent="hidden-gems">
                                                    <div class="travel-style-image">
                                                        <img src="/images/travel_style/hidden-gem.png" alt="Hidden Gems">
                                                    </div>
                                                    <div class="travel-style-content">
                                                        <h3 class="travel-style-title">Hidden Gems</h3>
                                                        <p class="travel-style-desc">Off-the-beaten-path discoveries</p>
                                                    </div>
                                                    <div class="travel-style-checkmark">✓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section id="features" class="features">
                <div class="features-container">
                    <div class="features-header">
                        <h2 class="features-title">Why choose our AI-powered planner</h2>
                        <p class="features-subtitle">Experience the future of travel planning with technology that understands your journey</p>
                    </div>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-image">
                                <img src="photo-1500530855697-b586d89ba3ee.avif" alt="AI-Powered Routes" loading="lazy">
                            </div>
                            <div class="feature-content">
                                <h3 class="feature-title">Intelligent Route Planning</h3>
                                <p class="feature-description">Our AI analyzes millions of travel patterns, real-time traffic, and local insights to craft the perfect journey tailored to your preferences.</p>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-image">
                                <img src="photo-1552470470-959579335ea9.avif" alt="Local Experiences" loading="lazy">
                            </div>
                            <div class="feature-content">
                                <h3 class="feature-title">Curated Local Experiences</h3>
                                <p class="feature-description">Discover hidden gems, authentic restaurants, and unique experiences that only locals know about, making every stop memorable.</p>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-image">
                                <img src="photo-1558980395-2f289089d3ec.avif" alt="Seamless Experience" loading="lazy">
                            </div>
                            <div class="feature-content">
                                <h3 class="feature-title">Seamless Integration</h3>
                                <p class="feature-description">Export to Google Maps, get real-time updates, and access your personalized itinerary across all your devices.</p>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-image">
                                <img src="premium_photo-1661885251699-b242dd1e6e20.avif" alt="Premium Support" loading="lazy">
                            </div>
                            <div class="feature-content">
                                <h3 class="feature-title">24/7 AI Assistant</h3>
                                <p class="feature-description">Get instant help, modify your plans on the go, and receive personalized recommendations from our intelligent travel assistant.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- About Section -->
            <section id="planning" class="about-section">
                <div class="about-container">
                    <div class="about-header">
                        <h2 class="about-title">How It Works</h2>
                        <p class="about-subtitle">Effortless AI-powered planning in three simple steps</p>
                    </div>
                    <div class="about-steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <h3>Choose Your Destination</h3>
                            <p>Enter any European city and select your preferences for budget and travel style</p>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <h3>AI Creates Your Route</h3>
                            <p>Our intelligent system generates the perfect route with curated stops and experiences</p>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <h3>Start Your Journey</h3>
                            <p>Export to Google Maps or Waze and embark on your perfectly planned adventure</p>
                        </div>
                    </div>
                </div>
            </section>
        </section>

    </div>


    <!-- Scripts -->
    <script>
        // Video functionality

        function scrollToPlanning() {
            document.getElementById('planning').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }


        // Navigation scroll effect and sticky form
        let stickyFormVisible = false;
        const stickyForm = document.getElementById('stickySearchForm');
        const heroSection = document.querySelector('.hero');

        window.addEventListener('scroll', () => {
            const nav = document.querySelector('.landing-nav');
            const scrollY = window.scrollY;

            // Navigation scroll effect
            if (scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }

            // Sticky form visibility - show when scrolling AWAY from hero form
            const heroOffset = heroSection ? heroSection.offsetTop + heroSection.offsetHeight - 100 : 600;
            if (scrollY > heroOffset && !stickyFormVisible) {
                stickyForm.classList.add('active');
                stickyFormVisible = true;
            } else if (scrollY <= heroOffset && stickyFormVisible) {
                stickyForm.classList.remove('active');
                stickyFormVisible = false;
            }
        });

        // Sync form values between main and sticky forms
        function syncFormValues() {
            const mainDestination = document.getElementById('destination');
            const stickyDestination = document.getElementById('stickyDestination');
            const mainStops = document.getElementById('stops');
            const stickyStops = document.getElementById('stickyStops');

            if (mainDestination && stickyDestination) {
                mainDestination.addEventListener('input', () => {
                    stickyDestination.value = mainDestination.value;
                });
                stickyDestination.addEventListener('input', () => {
                    mainDestination.value = stickyDestination.value;
                });
            }

            if (mainStops && stickyStops) {
                mainStops.addEventListener('change', () => {
                    stickyStops.value = mainStops.value;
                });
                stickyStops.addEventListener('change', () => {
                    mainStops.value = stickyStops.value;
                });
            }

            // Sync budget scroller selections
            const mainBudgetOptions = document.querySelectorAll('.budget-option');
            const stickyBudgetOptions = document.querySelectorAll('.sticky-budget-option');
            const budgetSlider = document.getElementById('budgetSlider');
            const stickyBudgetSlider = document.getElementById('stickyBudgetSlider');

            function updateBudgetSlider(activeOption, slider) {
                if (!activeOption || !slider) return;
                const position = parseInt(activeOption.dataset.position);
                const optionRect = activeOption.getBoundingClientRect();
                const containerRect = activeOption.parentElement.getBoundingClientRect();
                const leftPosition = optionRect.left - containerRect.left + (optionRect.width / 2) - 30;
                slider.style.left = `${leftPosition}px`;
            }

            mainBudgetOptions.forEach((option) => {
                option.addEventListener('click', () => {
                    const budget = option.dataset.budget;
                    // Update main form
                    mainBudgetOptions.forEach(opt => {
                        opt.classList.toggle('active', opt.dataset.budget === budget);
                    });
                    // Update sticky form
                    stickyBudgetOptions.forEach(opt => {
                        opt.classList.toggle('active', opt.dataset.budget === budget);
                    });

                    // Update sliders
                    const activeMain = document.querySelector('.budget-option.active');
                    const activeSticky = document.querySelector('.sticky-budget-option.active');
                    updateBudgetSlider(activeMain, budgetSlider);
                    updateBudgetSlider(activeSticky, stickyBudgetSlider);
                });
            });

            stickyBudgetOptions.forEach((option) => {
                option.addEventListener('click', () => {
                    const budget = option.dataset.budget;
                    // Update sticky form
                    stickyBudgetOptions.forEach(opt => {
                        opt.classList.toggle('active', opt.dataset.budget === budget);
                    });
                    // Update main form
                    mainBudgetOptions.forEach(opt => {
                        opt.classList.toggle('active', opt.dataset.budget === budget);
                    });

                    // Update sliders
                    const activeMain = document.querySelector('.budget-option.active');
                    const activeSticky = document.querySelector('.sticky-budget-option.active');
                    updateBudgetSlider(activeMain, budgetSlider);
                    updateBudgetSlider(activeSticky, stickyBudgetSlider);
                });
            });

            // Initialize budget sliders on page load
            setTimeout(() => {
                const activeMain = document.querySelector('.budget-option.active');
                const activeSticky = document.querySelector('.sticky-budget-option.active');
                updateBudgetSlider(activeMain, budgetSlider);
                updateBudgetSlider(activeSticky, stickyBudgetSlider);
            }, 100);

            // Sync travel style card selections
            const mainTravelCards = document.querySelectorAll('.travel-style-card');
            const stickyThemeBtns = document.querySelectorAll('.sticky-theme-btn');

            mainTravelCards.forEach((card) => {
                card.addEventListener('click', () => {
                    const agent = card.dataset.agent;
                    const isActive = !card.classList.contains('active');
                    card.classList.toggle('active', isActive);

                    stickyThemeBtns.forEach(sBtn => {
                        if (sBtn.dataset.agent === agent) {
                            sBtn.classList.toggle('active', isActive);
                        }
                    });
                });
            });

            stickyThemeBtns.forEach((btn) => {
                btn.addEventListener('click', () => {
                    const agent = btn.dataset.agent;
                    const isActive = !btn.classList.contains('active');
                    btn.classList.toggle('active', isActive);

                    mainTravelCards.forEach(card => {
                        if (card.dataset.agent === agent) {
                            card.classList.toggle('active', isActive);
                        }
                    });
                });
            });
        }

        // Connect sticky generate button to main generate function
        document.addEventListener('DOMContentLoaded', () => {
            syncFormValues();

            const stickyGenerateBtn = document.getElementById('stickyGenerateRoute');
            const mainGenerateBtn = document.getElementById('generateRoute');

            if (stickyGenerateBtn && mainGenerateBtn) {
                stickyGenerateBtn.addEventListener('click', () => {
                    mainGenerateBtn.click();
                });
            }
        });


    </script>

    <script>
        // Disable Mapbox telemetry to prevent ad-blocker conflicts
        window.mapboxTelemetryBlocked = true;
    </script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <script>
        // Additional telemetry disabling
        if (typeof mapboxgl !== 'undefined' && mapboxgl.Map) {
            mapboxgl.config.ACCESS_TOKEN = '';
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="js/emojiReplacer.js"></script>
    <script src="js/landmarksOverlay.js"></script>
    <script src="js/ztl-manager.js"></script>
    <script type="module" src="js/enhanced-route-results.js"></script>
    <script type="module" src="js/globalAI.js"></script>
    <script type="module" src="js/app.js?v=2.2"></script>
</body>
</html>